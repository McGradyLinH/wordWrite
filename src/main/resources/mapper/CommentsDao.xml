<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.test.dao.CommentsDao">


    <!--查询单个-->
    <select id="queryComments" resultType="comment">
        select * from comments where essayCode = #{essayCode} and essayNumber=#{index}
    </select>

    <insert id="insertComment" parameterType="comment">
        insert into comments (essayCode,spanId,comment,essayNumber) values
         (#{essayCode},#{spanId},#{comment},#{essayNumber})
    </insert>

    <delete id="deleteComment" parameterType="comment">
        delete from comments where essayCode=#{essayCode} and spanId=#{spanId} and essayNumber=#{essayNumber}
    </delete>

    <insert id="insertBatchComment" parameterType="comment">
        insert into comments (essayCode,spanId,comment,essayNumber) values
         <foreach collection="list" separator="," item="comment">
             (#{comment.essayCode},#{comment.spanId},#{comment.comment},#{comment.essayNumber})
         </foreach>
    </insert>

    <delete id="deleteBatchComment" parameterType="java.util.Map">
        delete from comments where essayCode=#{essayCode}  and essayNumber=#{essayNumber} and
         spanId in
         <foreach collection="list" open="(" close=")" separator="," item="item">
             #{item.spanId}
         </foreach>
    </delete>

</mapper>